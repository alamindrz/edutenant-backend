{% extends "base.html" %}
{% load static %}

{% block title %}Discover Schools - Edusuite{% endblock %}

{% block page_title %}Discover Schools{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Search and Filters -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row g-3 align-items-end">
                        <div class="col-md-8">
                            <label class="form-label small text-muted mb-1">Search Schools</label>
                            <input type="text" 
                                   class="form-control" 
                                   placeholder="Search by school name, location, or type..." 
                                   name="search"
                                   hx-get="{% url 'school_feed' %}"
                                   hx-target="#schools-container"
                                   hx-trigger="keyup changed delay:500ms"
                                   hx-indicator="#schools-loading"
                                   value="{{ search_query }}">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small text-muted mb-1">School Type</label>
                            <select class="form-select" 
                                    name="school_type"
                                    hx-get="{% url 'school_feed' %}"
                                    hx-target="#schools-container"
                                    hx-trigger="change"
                                    hx-indicator="#schools-loading">
                                <option value="">All Types</option>
                                <option value="nursery" {% if request.GET.school_type == 'nursery' %}selected{% endif %}>Nursery</option>
                                <option value="primary" {% if request.GET.school_type == 'primary' %}selected{% endif %}>Primary</option>
                                <option value="secondary" {% if request.GET.school_type == 'secondary' %}selected{% endif %}>Secondary</option>
                                <option value="combined" {% if request.GET.school_type == 'combined' %}selected{% endif %}>Combined</option>
                                <option value="full" {% if request.GET.school_type == 'full' %}selected{% endif %}>Full K-12</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Schools Container -->
    <div id="schools-container" hx-get="{% url 'school_feed' %}" hx-trigger="load">
        <!-- Loading state -->
        <div class="text-center py-5" id="schools-loading">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading schools...</span>
            </div>
            <p class="text-muted mt-2">Discovering schools...</p>
        </div>
    </div>
</div>
{% endblock %}