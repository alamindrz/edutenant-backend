<!-- templates/users/partials/application_detail_modal.html -->
<div class="modal-header">
    <h5 class="modal-title">Application Details</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
    <div class="row mb-4">
        <div class="col-md-6">
            <h6>Applicant Information</h6>
            <p class="mb-1"><strong>Name:</strong> {{ application.full_name }}</p>
            <p class="mb-1"><strong>Email:</strong> {{ application.email }}</p>
            <p class="mb-1"><strong>Phone:</strong> {{ application.phone_number|default:"Not provided" }}</p>
            <p class="mb-1"><strong>Application Type:</strong> {{ application.get_application_type_display }}</p>
        </div>
        <div class="col-md-6">
            <h6>Application Details</h6>
            <p class="mb-1"><strong>Position:</strong> {{ application.position_applied }}</p>
            <p class="mb-1"><strong>Experience:</strong> {{ application.years_of_experience }} years</p>
            <p class="mb-1"><strong>Qualification:</strong> {{ application.qualification }}</p>
            {% if application.specialization %}
            <p class="mb-1"><strong>Specialization:</strong> {{ application.specialization }}</p>
            {% endif %}
            <p class="mb-1"><strong>Status:</strong> 
                <span class="badge bg-{% if application.status == 'pending' %}warning{% elif application.status == 'approved' %}success{% elif application.status == 'rejected' %}danger{% else %}secondary{% endif %}">
                    {{ application.get_status_display }}
                </span>
            </p>
        </div>
    </div>
    
    {% if application.cover_letter %}
    <div class="mb-4">
        <h6>Cover Letter</h6>
        <div class="border rounded p-3 bg-light">
            {{ application.cover_letter|linebreaks }}
        </div>
    </div>
    {% endif %}
    
    <div class="row">
        <div class="col-md-6">
            <h6>Timeline</h6>
            <p class="mb-1"><strong>Applied:</strong> {{ application.created_at|date:"F d, Y" }}</p>
            {% if application.status_changed_at %}
            <p class="mb-1"><strong>Last Updated:</strong> {{ application.status_changed_at|date:"F d, Y" }}</p>
            {% endif %}
        </div>
        <div class="col-md-6">
            <h6>Documents</h6>
            {% if application.resume %}
            <p class="mb-1">
                <a href="{{ application.resume.url }}" target="_blank" class="text-decoration-none">
                    <i class="fas fa-file-pdf text-danger me-1"></i>Resume
                </a>
            </p>
            {% endif %}
            {% if application.certificates %}
            <p class="mb-0">
                <a href="{{ application.certificates.url }}" target="_blank" class="text-decoration-none">
                    <i class="fas fa-file-pdf text-danger me-1"></i>Certificates
                </a>
            </p>
            {% endif %}
        </div>
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    {% if application.status == 'pending' and perms.users.manage_staff %}
    <button type="button" class="btn btn-success"
            hx-post="{% url 'users:approve_application' application.id %}"
            hx-target="#applications-table-content"
            hx-confirm="Are you sure you want to approve this application?"
            data-bs-dismiss="modal">
        <i class="fas fa-check me-1"></i>Approve
    </button>
    <button type="button" class="btn btn-danger"
            hx-post="{% url 'users:reject_application' application.id %}"
            hx-target="#applications-table-content"
            hx-confirm="Are you sure you want to reject this application?"
            data-bs-dismiss="modal">
        <i class="fas fa-times me-1"></i>Reject
    </button>
    {% endif %}
</div>